reporting-disabled = <%= @reporting_disabled %>
hostname = "<%= @hostname %>"

[meta]
  dir = "<%= @meta_dir %>"
  retention-autocreate = <%= @retention_autocreate %>
  logging-enabled = true
  pprof-enabled = false
  lease-duration = "1m0s"

[data]
  dir = "<%= @data_dir %>"
  wal-dir = "<%= @data_wal_dir %>"
  engine = "<%= @data_engine %>"
  cache-max-memory-size = <%= @data_cache_max_memory_size %>
  cache-snapshot-memory-size = <%= @data_cache_snapshot_memory_size %>
  cache-snapshot-write-cold-duration = "<%= @data_cache_snapshot_write_cold_duration %>"
  compact-full-write-cold-duration = "<%= @data_compact_full_write_cold_duration %>"
  max-points-per-block = <%= @data_max_points_per_block %>
  data-logging-enabled = <%= @data_logging_enabled %>
  query-log-enabled = <%= @data_query_log_enabled %>
  wal-logging-enabled = <%= @data_wal_logging_enabled %>

[cluster]
  force-remote-mapping = false
  write-timeout = "10s"
  shard-writer-timeout = "5s"
  max-remote-write-connections = 3
  shard-mapper-timeout = "5s"
  max-concurrent-queries = 0
  query-timeout = "0"
  log-queries-after = "0"
  max-select-point = 0
  max-select-series = 0
  max-select-buckets = 0

[retention]
  enabled = <%= @retention %>
  check-interval = "<%= @retention_check_interval %>"

[shard-precreation]
  enabled = <%= @shard_precreation %>
  check-interval = "<%= @shard_check_interval %>"
  advance-period = "<%= @shard_advance_period %>"

[admin]
  enabled = <%= @admin_enabled %>
  bind-address = "<%= @admin_bind_address %>"
  https-enabled = <%= @admin_https_enabled %>
  https-certificate = "<%= @admin_https_certificate %>"
  Version = "<%= @admin_version %>"

[monitor]
  store-enabled = <%= @monitor_enabled %>
  store-database = "<%= @monitor_database %>"
  store-interval = "<%= @monitor_interval %>"

[subscriber]
  enabled = <%= @subscriber_enabled %>

[http]
  enabled = <%= @http_enabled %>
  bind-address = "<%= @http_bind_address %>"
  auth-enabled = <%= @http_auth_enabled %>
  log-enabled = <%= @http_log_enabled %>
  write-tracing = <%= @http_write_tracing %>
  pprof-enabled = <%= @http_pprof_enabled %>
  https-enabled = <%= @http_https_enabled %>
  https-certificate = "<%= @http_https_certificate %>"
  max-row-limit = <%= @http_max_row_limit %>

  <% if @graphite_options and ! @graphite_options.empty? -%>
  <% if @graphite_options.is_a?(Hash) -%>
  [[graphite]]
  <% @graphite_options.keys.sort.each do |key| -%>
  <% val = @graphite_options[key]
    if key == 'templates' and val.is_a?(Array) -%>
    templates = [
    <%- val.each do |template| -%>
      "<%=template %>",
    <%- end -%>
    ]
  <% elsif val.is_a?(Array) or val =~ /^(true|false|[0-9]+)$/ or val.is_a?(TrueClass) or val.is_a?(FalseClass) or val.is_a?(Fixnum) -%>
    <%=key %> = <%=val %>
  <% else -%>
    <%=key %> = "<%=val %>"
  <% end -%>
  <% end -%>
  <% elsif @graphite_options.is_a?(Array) -%>
  <% @graphite_options.each do |option| -%>
  [[graphite]]
  <% @options.key.sort.each do |key| -%>
  <% val = @options[key]
    if key == 'templates' and val.is_a?(Array) -%>
    templates = [
    <%- val.each do |template| -%>
      "<%=template %>",
    <%- end -%>
    ]
  <% elsif val.is_a?(Array) or val =~ /^(true|false|[0-9]+)$/ or val.is_a?(TrueClass) or val.is_a?(FalseClass) or val.is_a?(Fixnum) -%>
    <%=key %> = <%=val %>
  <% else -%>
    <%=key %> = "<%=val %>"
  <% end -%>
  <% end -%>
  <% end -%>
  <% end -%>
  <% else -%>
  [[graphite]]
    enabled = false
  <% end -%>

  <% if @collectd_options and ! @collectd_options.empty? -%>
  <% if @collectd_options.is_a?(Hash) -%>
  [[collectd]]
  <% @collectd_options.keys.sort.each do |key| -%>
  <% val = @collectd_options[key]
    if val =~ /^(true|false|[0-9]+)$/ or val.is_a?(TrueClass) or val.is_a?(FalseClass) or val.is_a?(Fixnum) -%>
    <%=key %> = <%=val %>
  <% else -%>
    <%=key %> = "<%=val %>"
  <% end -%>
  <% end -%>
  <% elsif @collectd_options.is_a?(Array) -%>
  <% @collectd_options.each do |option| -%>
  [[collectd]]
  <% option.keys.sort.each do |key| -%>
  <% val = @option[key]
    if val =~ /^(true|false|[0-9]+)$/ or val.is_a?(TrueClass) or val.is_a?(FalseClass) or val.is_a?(Fixnum) -%>
    <%=key %> = <%=val %>
  <% else -%>
    <%=key %> = "<%=val %>"
  <% end -%>
  <% end -%>
  <% end -%>
  <% end -%>
  <% else -%>
  [[collectd]]
    enabled = false
  <% end -%>

  <% if @opentsdb_options and ! @opentsdb_options.empty? -%>
  <% if @opentsdb_options.is_a?(Hash) -%>
  [[opentsdb]]
  <% @opentsdb_options.keys.sort.each do |key|
     val = @opentsdb_options[key]
    -%>
  <% if val =~ /^(true|false|[0-9]+)$/ or val.is_a?(TrueClass) or val.is_a?(FalseClass) or val.is_a?(Fixnum) -%>
    <%=key %> = <%=val %>
  <% else -%>
    <%=key %> = "<%=val %>"
  <% end -%>
  <% end -%>
  <% elsif @opentsdb_options.is_a?(Array) -%>
  <% @opentsdb_options.each do |option| -%>
  [[opentsdb]]
  <% option.keys.sort.each do |key|
     val = @option[key]
    -%>
  <% if val =~ /^(true|false|[0-9]+)$/ or val.is_a?(TrueClass) or val.is_a?(FalseClass) or val.is_a?(Fixnum) -%>
    <%=key %> = <%=val %>
  <% else -%>
    <%=key %> = "<%=val %>"
  <% end -%>
  <% end -%>
  <% end -%>
  <% end -%>
  <% else -%>
  [[opentsdb]]
    enabled = false
  <% end -%>

  <% if @udp_options and ! @udp_options.empty? -%>
  <% if @udp_options.is_a?(Hash) -%>
  [[udp]]
  <% @udp_options.keys.sort.each do |key|
     val =  @udp_options[key]
     -%>
  <% if val =~ /^(true|false|[0-9]+)$/ or val.is_a?(TrueClass) or val.is_a?(FalseClass) or val.is_a?(Fixnum) -%>
    <%=key %> = <%=val %>
  <% else -%>
    <%=key %> = "<%=val %>"
  <% end -%>
  <% end -%>
  <% elsif @udp_options.is_a?(Array) -%>
  <% @udp_options.each do |option| -%>
  [[udp]]
  <% option.keys.sort.each do |key|
   val = option[key]
    -%>
  <% if val =~ /^(true|false|[0-9]+)$/ or val.is_a?(TrueClass) or val.is_a?(FalseClass) or val.is_a?(Fixnum) -%>
    <%=key %> = <%=val %>
  <% else -%>
    <%=key %> = "<%=val %>"
  <% end -%>
  <% end -%>
  <% end -%>
  <% end -%>
  <% else -%>
  [[udp]]
    enabled = false
  <% end -%>

[continuous_queries]
  enabled = <%= @continuous_queries_enabled %>
  log-enabled = <%= @continuous_queries_log_enabled %>
  run-interval = "<%= @continuous_queries_run_interval %>"
